{% load static %}

<!DOCTYPE html>
<html lang="ja">

<head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>ランキング＋フレンド機能</title>
        <link rel="stylesheet" href="{% static 'css/ranking.css' %}" />
</head>

<body>
        <h1>ランキング＋フレンド機能</h1>

        <div class="container">
                <div class="main-content">
                        <div class="ranking-type-buttons-top">
                                <button class="ranking-type-button active" data-ranking-type="coin">コイン</button>
                                <button class="ranking-type-button" data-ranking-type="winrate">勝率</button>
                                <button class="ranking-type-button" data-ranking-type="wins">勝ち数</button>
                        </div>

                        <div class="ranking-section-wrapper">
                                <div class="ranking-header">
                                        <h2>ランキング</h2>
                                </div>

                                <!-- ランキング表示部 -->
                                <table class="ranking-table">
                                        <thead>
                                                <tr>
                                                        <th>順位</th>
                                                        <th>プレイヤー名</th>
                                                        <th>コイン</th>
                                                        <th>勝率</th>
                                                        <th>勝ち数</th>
                                                </tr>
                                        </thead>
                                        <tbody>
                                                {% for player in player_list %}
                                                <tr>
                                                        <td>{{ player.rank }}</td>
                                                        <td>{{ player.playerName }}</td>
                                                        <td>{{ player.coin }}</td>
                                                        <td>{{ player.winrate }}</td>
                                                        <td>{{ player.wins }}</td>
                                                </tr>
                                                {% endfor %}
                                        </tbody>
                                </table>

                        </div>
                </div>

                <div class="sidebar-buttons">
                        <a href="#" class="button" onclick="alert('ホームに戻る機能は未実装です'); return false;">ホームに戻る</a>
                        <a href="#" class="button" onclick="alert('フレンドon/off機能は未実装です'); return false;">フレンドon/off</a>
                        <a href="{% url 'friend_registration' %}" class="button">フレンド新規登録</a>
                </div>
        </div>

        <script>


                const rankingTypeButtons = document.querySelectorAll('.ranking-type-button');
                const rankingTableBody = document.getElementById('rankingTableBody');
                const currentRankingHeader = document.querySelector('.current-ranking-header');

                function updateRankingTable(type) {
                        const data = dummyRankings[type];
                        rankingTableBody.innerHTML = '';

                        data.forEach(item => {
                                const row = document.createElement('tr');
                                row.innerHTML = `
                    <td>${item.rank}.</td>
                    <td>${item.playerName}</td>
                    <td>${item.value}</td>
                `;
                                rankingTableBody.appendChild(row);
                        });

                        let headerText = '';
                        if (type === 'coin') headerText = 'コイン';
                        else if (type === 'winrate') headerText = '勝率';
                        else if (type === 'wins') headerText = '勝ち数';
                        currentRankingHeader.textContent = headerText;
                }

                rankingTypeButtons.forEach(button => {
                        button.addEventListener('click', function () {
                                rankingTypeButtons.forEach(btn => btn.classList.remove('active'));
                                this.classList.add('active');

                                const rankingType = this.dataset.rankingType;
                                updateRankingTable(rankingType);
                        });
                });

                updateRankingTable('coin');
        </script>
</body>

</html>
